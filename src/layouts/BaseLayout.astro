---
// Base layout: includes the global stylesheet from /style.css
import FloatingToolbar from '../components/FloatingToolbar.astro';
import AddEmployeeModal from '../components/AddEmployeeModal.astro';
---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="/style.css" />
    <link rel="stylesheet" href="/styles/search-feedback.css" />
  </head>
  <body>
    <slot />
    <FloatingToolbar />
    <AddEmployeeModal />
    <script src="/scripts/datetime.js" is:inline></script>
    <script type="module" src="/scripts/search.js" defer></script>
    <!-- Production: Use real Firebase auth toolbar -->
    <script type="module" src="/scripts/floating-toolbar.js" defer></script>
    <!-- Debug: load test toolbar when visiting with ?debugToolbar=1 -->
    <script>
      (function(){
        try {
          const p = new URLSearchParams(location.search);
          if (p.get('debugToolbar') === '1') {
            const s = document.createElement('script');
            s.type = 'module';
            s.src = '/scripts/floating-toolbar-test.js';
            document.head.appendChild(s);
            console.log('Debug toolbar loaded via ?debugToolbar=1');
          }
        } catch (e) {
          console.warn('Debug toolbar loader error', e);
        }
      })();
    </script>
  </body>
</html>
